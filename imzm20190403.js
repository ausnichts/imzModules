var imzModules=function(){var e=function(){this.mvBgImg=arguments[0].mvBgImg||!1,this.chgFeturedImg=arguments[0].chgFeturedImg||!1,this.scrNavi=arguments[0].scrNavi||!1,this.mvCategory=arguments[0].mvCategory||!1,this.linkBlank=arguments[0].linkBlank||!1};return e.prototype.init=function(){var e=document.body.classList;if(this.linkBlank){var t=new RegExp("^http(s)?://(?!"+location.hostname+")");Array.prototype.forEach.call(document.getElementsByTagName("a"),function(e){t.test(e.href)&&e.setAttribute("target","_blank")})}if(this.mvBgImg&&e.contains("header-image-enable")){var o=document.getElementById("blog-title-inner");document.getElementById("blog-title").style.backgroundImage=o.style.backgroundImage,o.removeAttribute("style")}if(this.chgFeturedImg&&e.contains("page-index")&&e.contains("page-archive")){var a=document.getElementsByClassName("entry-thumb"),n=/https%3A%2F%2F.+\.(jpg|jpeg|gif|png|bmp)/i;Array.prototype.forEach.call(a,function(e){var t=n.exec(e.getAttribute("style"));null!==t&&(e.style.backgroundImage="url("+decodeURIComponent(t[0])+")")})}if(this.mvCategory){var l=document.getElementsByClassName("hatena-module-category")[0],i=document.getElementById("top-editarea-inner");if(void 0!==l&&null!==i){var s=l.getElementsByClassName("hatena-urllist")[0];s.classList.remove("hatena-urllist"),s.classList.add("imzMenu"),Array.prototype.forEach.call(s.getElementsByTagName("a"),function(e){e.textContent=e.textContent.replace(/\s\(([0-9]{1,})\)/,"")}),i.appendChild(s),l.style.display="none"}}if(this.scrNavi){for(var c=document.getElementById("wrapper"),r=['<li><a href="javascript:void(0);" onclick="smoothScroll(0);"><i class="blogicon-chevron-up"></i></a></li>','<li><a href="javascript:void(0);" onclick="scrollToContent(\'imz-smoothscroll\');"><i class="blogicon-chevron-down"></i></a></li>','<li><a href="/"><i class="blogicon-home"></i></a></li>'],m=document.createElement("ul"),d=0;d<r.length;d++)m.insertAdjacentHTML("beforeend",r[d]);m.classList.add("imzScroll"),document.getElementById("bottom-editarea-inner").appendChild(m);var g=c.getElementsByClassName("table-of-contents")[0];void 0!==g&&Array.prototype.forEach.call(g.getElementsByTagName("a"),function(e){e.setAttribute("onclick","javascript:scrollToContent('"+e.getAttribute("href")+"')"),e.setAttribute("href","javascript:void(0)")});var u=document.createElement("div");u.id="imz-smoothscroll",c.appendChild(u)}var f=document.getElementsByClassName("imzMenu")[0];if(void 0!==f){var v=document.createElement("a");v.setAttribute("href","javascript:void(0);"),v.setAttribute("onclick","toggleoffcanvas();return false;"),v.classList.add("offcanvastoggle"),f.parentNode.insertBefore(v,f)}},e}();function smoothScroll(e){var t=window.pageYOffset,o=e>t;setTimeout(function(){o&&t<=e?(t=t+(e-t)/20+1,window.scrollTo(0,t),setTimeout(arguments.callee,10)):!o&&t>=e?(t=t-(t-e)/20-1,window.scrollTo(0,t),setTimeout(arguments.callee,10)):window.scrollTo(0,e)},10)}function scrollToContent(e){var t=document.getElementById(e.replace(/^#/,""));null!=t&&(smoothScroll(t.getBoundingClientRect().top+window.pageYOffset),document.body.classList.contains("offcanvas")&&toggleoffcanvas())}function toggleoffcanvas(){if(document.body.classList.contains("offcanvas"))document.body.classList.remove("offcanvas");else{document.body.classList.add("offcanvas");var e=document.getElementsByClassName("imzMenu")[0];e.addEventListener("touchmove",function(t){var o=e.scrollTop,a=e.scrollHeight-e.offsetHeight-1;o<1?(t.preventDefault(),e.scrollTop=1):o>a&&(t.preventDefault(),e.scrollTop=a)})}}
